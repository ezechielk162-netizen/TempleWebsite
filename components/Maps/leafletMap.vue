<script setup lang="ts">
import { onMounted, ref } from 'vue'
import type { Map as LeafletMap, Marker } from 'leaflet'
import Swal from 'sweetalert2';
import L from 'leaflet';
import type { SearchResult } from 'leaflet-geosearch/dist/providers/provider.js';

const mapContainer = ref<HTMLElement | null>(null)
const searchResults = ref<SearchResult[]>([]);
const currentPosition = ref({ lat: 5.3599517, lng: -4.0082563 });
const isLoading = ref(false);
const noResults = ref(false);
const errorSearch = ref("");
const eligibilityError = ref("");

const userAppStore = useUserAppStore();

let map: LeafletMap
let marker: Marker
let provider: any = null; // Initialisé plus tard


const updatePosition = (latlng: L.LatLng) => {
    currentPosition.value = { lat: latlng.lat, lng: latlng.lng };
};

onMounted(async () => {
    if (typeof window === 'undefined' || !mapContainer.value) return;

    // Import dynamique de Leaflet uniquement côté client
    const L = (await import('leaflet')).default
    await import('leaflet/dist/leaflet.css')

    const customIcon = L.divIcon({
        className: 'custom-icon',
        html: `
      <svg width="25" height="41" viewBox="0 0 25 41" xmlns="http://www.w3.org/2000/svg">
        <path d="M12.5 0C5.6 0 0 5.6 0 12.5c0 8.8 12.5 28.5 12.5 28.5s12.5-19.8 12.5-28.5C25 5.6 19.4 0 12.5 0z" fill="#ff6b00"/>
        <circle cx="12.5" cy="12.5" r="5" fill="white"/>
      </svg>
    `,
        iconSize: [25, 41],
        iconAnchor: [12, 41],
    });

    map = L.map(mapContainer.value).setView([5.3599517, -4.0082563], 13);


    // Ajout des tuiles OpenStreetMap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
    }).addTo(map);

    /// Création d'un marqueur déplaçable
    marker = L.marker([5.3599517, -4.0082563], {
        draggable: true, icon: customIcon, // Rend le marqueur déplaçable
    }).addTo(map);

    // Mise à jour de la position lorsqu'on déplace le marqueur
    marker.on('dragend', (event) => {
        const latLng = event.target.getLatLng()
        updatePosition(latLng);
        userAppStore.setLocalisation([latLng.lat, latLng.lng])
    });

    map.on('click', (event) => {
        const latlng = event.latlng;
        marker?.setLatLng(latlng);
        updatePosition(latlng);
        userAppStore.setLocalisation([latlng.lat, latlng.lng])
    });

    const { OpenStreetMapProvider } = await import('leaflet-geosearch');
    provider = new OpenStreetMapProvider();
    // opportunityForm.addressEligibility = communesList.value.find((item: any) => item.id === opportunityForm.municipalityId)?.label;
    // await handleSearch();
});

async function handleSearch() {
    if (!provider) return; // Vérifier que le fournisseur est initialisé

    isLoading.value = true;
    noResults.value = false;

    try {
        eligibilityError.value = "";
        const results = await provider.search({ query: "Abidjan" });
        const filteredResults = results.filter(
            (result: any) =>
                result.raw?.address?.country === 'Côte d’Ivoire' ||
                result.raw?.display_name?.includes('Côte d’Ivoire')
        );

        searchResults.value = filteredResults;

        if (filteredResults.length > 0) {
            const { x: lng, y: lat } = filteredResults[0];
            if (map) {
                map.setView([lat, lng], 13);
                marker?.setLatLng([lat, lng]);
                //  opportunityStore.setLocalisation([filteredResults[0].y, filteredResults[0].x])
                updatePosition(L.latLng(lat, lng));
            }
        } else {
            errorSearch.value = "Aucun emplacement correspondant à votre recherche !";
            noResults.value = true;
            Swal.fire({
                title: errorSearch.value,
                html: `<div>
    <svg :width="width" :height="height" viewBox="0 0 360 260" fill="none" xmlns="http://www.w3.org/2000/svg">
      <g clip-path="url(#clip0_1838_8344)">
      <path d="M70.7003 135.45C70.6203 133.7 70.5703 131.94 70.5703 130.17V141.27C70.7903 143.39 71.0703 145.48 71.4003 147.56C71.5603 147.46 71.7303 147.35 71.9003 147.25C71.2903 143.38 70.8803 139.44 70.6903 135.44L70.7003 135.45Z" fill="white"/>
      <path d="M256.94 52.39C257.1 52.22 257.24 52.04 257.41 51.88C240.35 34.97 217.78 23.62 192.63 20.75H179.99C210 20.75 237.18 32.83 256.94 52.39Z" fill="white"/>
      <path d="M192.63 20.7495C188.49 20.2695 184.27 20.0195 180 20.0195C175.73 20.0195 171.51 20.2695 167.37 20.7495H192.63Z" fill="white"/>
      <path d="M284.96 163.02C287.13 156.1 288.64 148.89 289.41 141.45V130.17C289.41 141.55 287.67 152.53 284.44 162.85C284.61 162.91 284.78 162.96 284.95 163.02H284.96Z" fill="white"/>
      <path d="M289.41 130.17V118.57C287.89 103.86 283.47 90.0204 276.74 77.6104H275.98C284.54 93.2104 289.41 111.12 289.41 130.16V130.17Z" fill="white"/>
      <path d="M85.9603 72.9199C77.6803 86.5399 72.2703 102.09 70.5703 118.75V130.17C70.5703 109.18 76.4803 89.5799 86.7303 72.9299H85.9603V72.9199Z" fill="white"/>
      <path d="M179.99 20.75H167.37C145.32 23.27 125.26 32.31 109.15 45.89C109.35 46.02 109.53 46.16 109.72 46.3C128.73 30.36 153.23 20.75 179.99 20.75Z" fill="white"/>
      <path d="M289.41 130.17V141.45C289.8 137.69 290 133.87 290 130.01C290 126.15 289.8 122.33 289.41 118.57V130.17Z" fill="white"/>
      <path d="M109.14 45.89C125.25 32.31 145.32 23.27 167.37 20.75H167.18C145.2 23.3 125.2 32.33 109.13 45.88C109.13 45.88 109.14 45.88 109.15 45.88L109.14 45.89Z" fill="white"/>
      <path d="M180 20.02C184.27 20.02 188.49 20.27 192.63 20.75H192.82C188.61 20.26 184.33 20 180 20C175.67 20 171.38 20.26 167.18 20.75H167.37C171.51 20.27 175.73 20.02 180 20.02Z" fill="white"/>
      <path d="M85.9603 72.9199H85.9503C77.6703 86.5299 72.2703 102.08 70.5703 118.73V118.75C72.2703 102.09 77.6803 86.5399 85.9603 72.9199Z" fill="white"/>
      <path d="M290 130.01C290 130.01 290 130.01 290 130C290 126.13 289.8 122.31 289.41 118.55V118.57C289.8 122.33 290 126.15 290 130.01Z" fill="white"/>
      <path d="M70.57 118.73C70.19 122.44 70 126.2 70 130C70 130 70 130 70 130.01C70 126.21 70.19 122.45 70.57 118.75V118.73Z" fill="white"/>
      <path d="M70.57 130.17V118.75C70.19 122.45 70 126.21 70 130.01C70 133.81 70.19 137.57 70.57 141.27V130.17Z" fill="white"/>
      <path d="M71.9003 147.25C81.2503 141.53 108.85 129.51 169.11 136.16C167.64 132.5 166.82 128.51 166.82 124.32C166.82 106.79 181.03 92.58 198.56 92.58C216.09 92.58 230.3 106.79 230.3 124.32C230.3 132.42 227.26 139.8 222.27 145.41C240.86 149.68 261.53 155.39 284.45 162.84C287.68 152.52 289.42 141.54 289.42 130.16C289.42 111.11 284.55 93.21 275.99 77.61H251.09C248.78 77.61 246.66 76.77 245.03 75.38C243.01 73.66 241.73 71.1 241.73 68.24C241.73 65.65 242.78 63.31 244.47 61.62C246.16 59.93 248.51 58.88 251.09 58.88H253.6C254.14 56.41 255.32 54.19 256.96 52.38C237.18 32.83 210 20.75 179.99 20.75C153.23 20.75 128.73 30.36 109.72 46.31C112.39 48.28 114.33 51.18 115.06 54.54H124.21C126.75 54.54 129.05 55.57 130.71 57.23C132.37 58.89 133.4 61.19 133.4 63.73C133.4 66.1 132.5 68.26 131.03 69.89C129.35 71.75 126.91 72.93 124.2 72.93H86.7303C76.4803 89.58 70.5703 109.18 70.5703 130.17C70.5703 131.94 70.6103 133.7 70.7003 135.45C70.8903 139.45 71.3003 143.38 71.9103 147.26L71.9003 147.25Z" fill="white"/>
      <path d="M71.9003 147.25C81.2503 141.53 108.85 129.51 169.11 136.16C167.64 132.5 166.82 128.51 166.82 124.32C166.82 106.79 181.03 92.58 198.56 92.58C216.09 92.58 230.3 106.79 230.3 124.32C230.3 132.42 227.26 139.8 222.27 145.41C240.86 149.68 261.53 155.39 284.45 162.84C287.68 152.52 289.42 141.54 289.42 130.16C289.42 111.11 284.55 93.21 275.99 77.61H251.09C248.78 77.61 246.66 76.77 245.03 75.38C243.01 73.66 241.73 71.1 241.73 68.24C241.73 65.65 242.78 63.31 244.47 61.62C246.16 59.93 248.51 58.88 251.09 58.88H253.6C254.14 56.41 255.32 54.19 256.96 52.38C237.18 32.83 210 20.75 179.99 20.75C153.23 20.75 128.73 30.36 109.72 46.31C112.39 48.28 114.33 51.18 115.06 54.54H124.21C126.75 54.54 129.05 55.57 130.71 57.23C132.37 58.89 133.4 61.19 133.4 63.73C133.4 66.1 132.5 68.26 131.03 69.89C129.35 71.75 126.91 72.93 124.2 72.93H86.7303C76.4803 89.58 70.5703 109.18 70.5703 130.17C70.5703 131.94 70.6103 133.7 70.7003 135.45C70.8903 139.45 71.3003 143.38 71.9103 147.26L71.9003 147.25Z" fill="url(#paint0_linear_1838_8344)"/>
      <path d="M87.5204 57.5003C87.5204 56.4803 87.6404 55.4903 87.8504 54.5303H85.3904C82.1204 54.5303 79.2504 56.2303 77.6204 58.8003C76.7204 60.2203 76.1904 61.9103 76.1904 63.7203C76.1904 66.2603 77.2204 68.5603 78.8804 70.2203C80.5404 71.8803 82.8404 72.9103 85.3804 72.9103H85.9504C87.3804 70.5703 88.8904 68.2803 90.4804 66.0603C88.6304 63.7003 87.5204 60.7303 87.5204 57.4903V57.5003Z" fill="white"/>
      <path d="M90.48 66.0703C88.89 68.2903 87.38 70.5803 85.95 72.9203H85.96C87.38 70.5803 88.89 68.3003 90.48 66.0803C90.48 66.0803 90.48 66.0803 90.48 66.0703Z" fill="white"/>
      <path d="M90.9197 66.6101C90.7697 66.4401 90.6297 66.2601 90.4897 66.0801C88.8997 68.3001 87.3897 70.5801 85.9697 72.9201H86.7397C88.0697 70.7601 89.4597 68.6601 90.9297 66.6001L90.9197 66.6101Z" fill="white"/>
      <path d="M101.45 71.44C97.2405 71.44 93.4705 69.56 90.9205 66.61C89.4505 68.66 88.0605 70.77 86.7305 72.93H124.21C126.92 72.93 129.36 71.76 131.04 69.89C132.51 68.26 133.41 66.1 133.41 63.73C133.41 61.19 132.38 58.89 130.72 57.23C129.06 55.57 126.76 54.54 124.22 54.54H115.07C115.28 55.5 115.4 56.49 115.4 57.51C115.4 65.21 109.16 71.44 101.47 71.44H101.45Z" fill="white"/>
      <path d="M109.13 45.8803C106.93 44.4203 104.29 43.5703 101.45 43.5703C94.78 43.5703 89.2 48.2703 87.84 54.5303H99.98C102.86 51.4803 105.92 48.5903 109.13 45.8803Z" fill="white"/>
      <path d="M99.9797 54.5296H99.9997C102.88 51.4796 105.93 48.5896 109.14 45.8896C109.14 45.8896 109.13 45.8896 109.12 45.8896C105.91 48.5996 102.85 51.4896 99.9697 54.5396L99.9797 54.5296Z" fill="white"/>
      <path d="M100 54.5296H100.93C103.71 51.6296 106.64 48.8796 109.72 46.2996C109.53 46.1596 109.34 46.0196 109.15 45.8896C105.94 48.5996 102.89 51.4796 100.01 54.5296H100Z" fill="white"/>
      <path d="M100.92 54.5298H115.05C114.32 51.1698 112.38 48.2798 109.71 46.2998C106.63 48.8798 103.7 51.6298 100.92 54.5298Z" fill="white"/>
      <path d="M90.48 66.0703C93.39 62.0103 96.56 58.1503 99.98 54.5303H87.84C87.63 55.4903 87.51 56.4803 87.51 57.5003C87.51 60.7303 88.62 63.7003 90.47 66.0703H90.48Z" fill="white"/>
      <path d="M99.9805 54.5303C96.5605 58.1503 93.3805 62.0103 90.4805 66.0703C90.4805 66.0703 90.4805 66.0703 90.4805 66.0803C93.3905 62.0103 96.5705 58.1603 99.9905 54.5303H99.9705H99.9805Z" fill="white"/>
      <path d="M100 54.5303C96.58 58.1603 93.4 62.0103 90.49 66.0803C90.63 66.2603 90.77 66.4303 90.92 66.6103C93.97 62.3503 97.31 58.3103 100.93 54.5303H100Z" fill="white"/>
      <path d="M90.92 66.61C93.48 69.56 97.24 71.44 101.45 71.44C109.15 71.44 115.38 65.2 115.38 57.51C115.38 56.49 115.26 55.5 115.05 54.54H100.92C97.31 58.32 93.96 62.35 90.91 66.62L90.92 66.61Z" fill="white"/>
      <path d="M230.29 124.33C230.29 106.8 216.08 92.5898 198.55 92.5898C181.02 92.5898 166.81 106.8 166.81 124.33C166.81 128.52 167.63 132.51 169.1 136.17C184.58 137.88 202.21 140.82 222.25 145.42C227.24 139.81 230.28 132.43 230.28 124.33H230.29Z" fill="white"/>
      <path d="M279.18 177.64C281.44 172.94 283.37 168.06 284.96 163.02C283.38 168.06 281.44 172.95 279.18 177.64Z" fill="#D6D6D6"/>
      <path d="M71.4004 147.57C73.3304 159.58 77.2004 170.94 82.6804 181.32C82.6804 181.32 82.6804 181.32 82.6904 181.32C77.2104 170.94 73.3304 159.58 71.4104 147.57H71.4004Z" fill="#D6D6D6"/>
      <path d="M83.2604 181.36C77.7104 170.89 73.8104 159.4 71.9004 147.26C71.7304 147.37 71.5604 147.47 71.4004 147.57C73.3304 159.58 77.2004 170.94 82.6804 181.32C82.8704 181.33 83.0704 181.35 83.2604 181.36Z" fill="#D6D6D6"/>
      <path d="M278.65 177.54C278.82 177.57 279 177.61 279.18 177.64C281.44 172.94 283.38 168.06 284.96 163.02C284.79 162.96 284.62 162.91 284.45 162.85C282.87 167.91 280.93 172.82 278.66 177.54H278.65Z" fill="#D6D6D6"/>
      <path d="M148.9 174.72C168.63 170.24 211.5 164.71 278.65 177.54C280.92 172.82 282.86 167.92 284.44 162.85C261.53 155.39 240.85 149.68 222.26 145.42C216.45 151.95 207.98 156.07 198.55 156.07C185.21 156.07 173.8 147.83 169.11 136.17C108.85 129.52 81.2504 141.53 71.9004 147.26C73.8104 159.41 77.7104 170.89 83.2604 181.36C85.9004 181.54 88.6304 181.76 91.4504 182.03C99.1904 179.87 118.35 175.51 148.89 174.72H148.9Z" fill="#D6D6D6"/>
      <path d="M198.55 156.06C207.98 156.06 216.45 151.94 222.26 145.41C202.22 140.81 184.59 137.87 169.11 136.16C173.8 147.82 185.21 156.06 198.55 156.06Z" fill="#D6D6D6"/>
      <path d="M273.18 188.47C273.18 188.47 273.18 188.47 273.19 188.47C275.38 184.99 277.39 181.37 279.18 177.64C277.38 181.37 275.38 184.99 273.19 188.47H273.18Z" fill="white"/>
      <path d="M273.18 188.47C275.37 184.99 277.38 181.37 279.17 177.64C279 177.61 278.82 177.57 278.64 177.54C276.85 181.27 274.84 184.88 272.65 188.36C272.82 188.4 273 188.44 273.17 188.48L273.18 188.47Z" fill="white"/>
      <path d="M148.9 174.72C179.06 173.93 220.33 176.64 272.66 188.36C274.85 184.88 276.85 181.27 278.65 177.54C211.51 164.71 168.63 170.23 148.9 174.72Z" fill="white"/>
      <path d="M95.9204 200.92H95.9004C114.11 222.5 140.47 236.97 170.23 239.59H170.48C140.62 237.03 114.18 222.55 95.9204 200.92Z" fill="#D6D6D6"/>
      <path d="M265.28 199.5H265.26C246.97 221.91 220.02 236.97 189.51 239.59H189.76C220.18 236.91 247.04 221.87 265.28 199.5Z" fill="#D6D6D6"/>
      <path d="M180 240C176.79 240 173.62 239.85 170.48 239.59H170.23C173.45 239.87 176.7 240.03 179.99 240.03C183.28 240.03 186.54 239.88 189.75 239.59H189.5C186.36 239.86 183.19 240 179.98 240H180Z" fill="#D6D6D6"/>
      <path d="M170.48 239.59C173.62 239.86 176.79 240 180 240C183.21 240 186.38 239.85 189.52 239.59H170.49H170.48Z" fill="#D6D6D6"/>
      <path d="M96.53 200.92H95.92C114.18 222.55 140.63 237.03 170.48 239.59H179.99C146.54 239.59 116.6 224.58 96.53 200.92Z" fill="#D6D6D6"/>
      <path d="M179.99 239.59H189.52C220.03 236.98 246.98 221.91 265.27 199.5H264.65C244.58 223.97 214.12 239.59 180 239.59H179.99Z" fill="#D6D6D6"/>
      <path d="M175.04 200.92H96.5303C116.6 224.57 146.54 239.59 179.99 239.59C213.44 239.59 244.57 223.97 264.64 199.5H170.76C172.18 199.96 173.61 200.44 175.05 200.92H175.04Z" fill="#D6D6D6"/>
      <path d="M136.2 178.38C136.2 178.38 140.41 176.64 148.9 174.71C118.36 175.51 99.2 179.86 91.46 182.02C104.45 183.29 119.36 185.67 136.2 189.68V178.37V178.38Z" fill="#D6D6D6"/>
      <path d="M265.26 199.5H265.28C265.4 199.35 265.52 199.2 265.64 199.05H265.62C265.5 199.2 265.38 199.35 265.26 199.5Z" fill="#D6D6D6"/>
      <path d="M265 199.05C264.88 199.2 264.76 199.35 264.64 199.5H265.26C265.38 199.35 265.5 199.2 265.62 199.05H265Z" fill="#D6D6D6"/>
      <path d="M170.76 199.5H264.65C264.77 199.35 264.89 199.2 265.01 199.05H169.38C169.84 199.2 170.3 199.35 170.76 199.5Z" fill="#D6D6D6"/>
      <path d="M265.62 199.05H265.64C268.36 195.68 270.88 192.15 273.19 188.47C273.19 188.47 273.19 188.47 273.18 188.47C270.87 192.15 268.34 195.68 265.62 199.05Z" fill="#D6D6D6"/>
      <path d="M265 199.05H265.62C268.34 195.68 270.87 192.15 273.18 188.47C273.01 188.43 272.83 188.39 272.66 188.35C270.32 192.07 267.76 195.64 265 199.05Z" fill="#D6D6D6"/>
      <path d="M148.9 174.72C140.41 176.65 136.2 178.39 136.2 178.39V189.7C146.53 192.16 157.58 195.24 169.37 199.06H264.99C267.75 195.66 270.31 192.09 272.65 188.36C220.32 176.64 179.05 173.94 148.89 174.72H148.9Z" fill="#D6D6D6"/>
      <path d="M275.98 77.6103H276.74C276.09 76.4103 275.41 75.2403 274.72 74.0703C274.53 74.1803 274.35 74.3003 274.15 74.4103C274.78 75.4703 275.39 76.5303 275.98 77.6103Z" fill="#D6D6D6"/>
      <path d="M267.44 76.0999C259.6 76.0999 253.25 69.7499 253.25 61.9099C253.25 60.8699 253.37 59.8599 253.58 58.8799H251.07C248.48 58.8799 246.14 59.9299 244.45 61.6199C242.76 63.3099 241.71 65.6599 241.71 68.2399C241.71 71.0999 242.99 73.6599 245.01 75.3799C246.64 76.7699 248.76 77.6099 251.07 77.6099H275.97C275.38 76.5299 274.77 75.4699 274.14 74.4099C272.14 75.4799 269.86 76.0999 267.43 76.0999H267.44Z" fill="#D6D6D6"/>
      <path d="M256.94 52.3899C259.04 54.4699 261.07 56.6399 263 58.8899H263.89C261.83 56.4599 259.67 54.1199 257.4 51.8799C257.24 52.0399 257.09 52.2199 256.93 52.3899H256.94Z" fill="#D6D6D6"/>
      <path d="M256.94 52.3896C255.3 54.1996 254.12 56.4196 253.58 58.8896H263C261.07 56.6396 259.05 54.4796 256.94 52.3896Z" fill="#D6D6D6"/>
      <path d="M274.15 74.4099C274.35 74.2999 274.53 74.1799 274.72 74.0699C271.54 68.6999 267.91 63.6199 263.9 58.8799H263.01C267.16 63.7099 270.89 68.8999 274.16 74.4099H274.15Z" fill="#D6D6D6"/>
      <path d="M267.44 76.0999C269.87 76.0999 272.15 75.4899 274.15 74.4099C270.88 68.9099 267.15 63.7099 263 58.8799H253.58C253.37 59.8599 253.25 60.8699 253.25 61.9099C253.25 69.7499 259.6 76.0999 267.44 76.0999Z" fill="#D6D6D6"/>
      <path d="M82.6897 181.32C82.6897 181.32 82.6897 181.32 82.6797 181.32C84.3197 184.43 86.1097 187.44 88.0297 190.37V190.35C86.1097 187.44 84.3297 184.43 82.6997 181.33L82.6897 181.32Z" fill="white"/>
      <path d="M83.2597 181.36C83.0697 181.35 82.8697 181.33 82.6797 181.32C84.3197 184.42 86.0997 187.43 88.0097 190.34L87.9397 189.36C86.2697 186.77 84.7097 184.1 83.2497 181.36H83.2597Z" fill="white"/>
      <path d="M87.5195 183.24C87.5195 183.24 88.8395 182.76 91.4595 182.03C88.6395 181.75 85.9095 181.54 83.2695 181.36C84.7195 184.1 86.2795 186.77 87.9595 189.36L87.5295 183.24H87.5195Z" fill="white"/>
      <path d="M94.3804 199.05H94.3604C94.8704 199.68 95.3804 200.3 95.9004 200.92H95.9204C95.4004 200.3 94.8804 199.68 94.3804 199.05Z" fill="white"/>
      <path d="M94.98 199.05H94.38C94.89 199.68 95.4 200.3 95.92 200.92H96.53C96.01 200.3 95.49 199.68 94.98 199.05Z" fill="white"/>
      <path d="M170.76 199.5H136.21V199.05H94.9805C95.4905 199.68 96.0105 200.3 96.5305 200.92H175.04C173.6 200.43 172.17 199.96 170.75 199.5H170.76Z" fill="white"/>
      <path d="M88.0195 190.34V190.36C89.9995 193.36 92.1095 196.26 94.3595 199.05H94.3795C92.1195 196.25 89.9995 193.35 88.0195 190.34Z" fill="white"/>
      <path d="M87.95 189.36L88.02 190.34C90 193.35 92.1199 196.26 94.3799 199.05H94.9799C92.4699 195.95 90.12 192.72 87.95 189.36Z" fill="white"/>
      <path d="M136.2 189.69C119.36 185.67 104.45 183.29 91.4595 182.03C88.8395 182.76 87.5195 183.24 87.5195 183.24L87.9495 189.36C90.1195 192.72 92.4695 195.96 94.9795 199.05H136.2V189.69Z" fill="white"/>
      <path d="M136.2 199.5H170.75C170.29 199.35 169.83 199.2 169.37 199.05H136.2V199.5Z" fill="white"/>
      <path d="M169.38 199.05C157.59 195.23 146.53 192.15 136.21 189.69V199.05H169.38Z" fill="white"/>
      </g>
      <g clip-path="url(#clip1_1838_8344)">
      <path d="M112 85.0559C112.414 89.511 116.361 92.7906 120.819 92.377C125.274 91.9634 128.554 88.0163 128.14 83.5576L112 85.0559Z" fill="#724F47"/>
      <path d="M131.735 83.5518L125.989 93.585L149.269 106.918L155.015 96.8847L131.735 83.5518Z" fill="#EE771B"/>
      <path d="M153.496 107.226C154.864 106.769 156.061 105.807 156.783 104.432L168.305 77.4771C169.792 74.6509 168.704 71.1573 165.878 69.6699C163.052 68.1824 159.554 69.2708 158.071 72.0969L146.548 99.0521C145.061 101.878 146.149 105.372 148.975 106.859C150.427 107.621 152.056 107.708 153.496 107.226Z" fill="#EE771B"/>
      <path d="M248.579 85.0559C248.166 89.511 244.218 92.7906 239.76 92.377C235.301 91.9634 232.025 88.0163 232.439 83.5576L248.579 85.0559Z" fill="#724F47"/>
      <path d="M228.841 83.5372L205.56 96.8701L211.306 106.903L234.587 93.5704L228.841 83.5372Z" fill="#EE771B"/>
      <path d="M207.083 107.226C205.716 106.769 204.518 105.807 203.797 104.432L192.274 77.4771C190.787 74.6509 191.875 71.1573 194.701 69.6699C197.528 68.1824 201.025 69.2708 202.509 72.0969L214.031 99.0521C215.518 101.878 214.43 105.372 211.604 106.859C210.153 107.621 208.524 107.708 207.083 107.226Z" fill="#EE771B"/>
      <path d="M196.319 116.531H165.265V134.95H196.319V116.531Z" fill="#322666"/>
      <path d="M196.319 116.531H182.519V250.76H196.319V116.531Z" fill="#472C85"/>
      <path d="M202.625 124.636H158.361V88.4804C158.361 79.4252 165.7 72.0859 174.755 72.0859H186.23C195.286 72.0859 202.625 79.4252 202.625 88.4804V124.636Z" fill="#EE771B"/>
      <path d="M196.319 124.621H165.265V128.126H196.319V124.621Z" fill="#472C85"/>
      <path d="M162.315 237.33C162.852 239.252 163.081 241.277 163.661 243.185C164.187 245.416 164.916 247.586 165.268 249.875C165.323 250.22 165.403 250.561 165.566 250.76H168.247C170.253 250.713 172.132 250.735 174.008 250.542C174.806 250.459 175.423 250.51 175.971 250.76H178.819C178.133 247.684 177.578 244.575 176.859 241.444C175.862 237.518 175.06 233.535 174.353 229.526C173.014 221.915 171.857 214.264 171.204 206.525C170.434 197.419 170.289 188.295 170.779 179.142C171.356 168.385 172.851 157.824 175.26 147.438C176.765 140.951 178.579 134.581 180.727 128.341L180.68 128.315C176.007 127.956 171.334 128.206 166.658 128.188C166.574 128.188 166.495 128.33 166.411 128.41C165.504 131.747 164.597 135.088 163.687 138.426C160.012 151.882 158.031 165.711 157.407 179.78C156.946 190.192 157.095 200.608 158.245 210.988C159.224 219.854 160.429 228.659 162.319 237.322L162.315 237.33Z" fill="#472C85"/>
      <path d="M182.519 250.216V259.993H218.054C218.054 257.976 216.665 256.14 214.495 255.295L195.939 250.216H182.515H182.519Z" fill="black"/>
      <path d="M218.054 260C218.054 257.983 216.665 256.147 214.495 255.302L210.298 254.159C208.389 254.587 206.829 255.781 206.692 260H218.051H218.054Z" fill="white"/>
      <path d="M182.519 258.193V259.989H218.054C218.054 259.365 217.92 258.759 217.673 258.193H182.519Z" fill="#E48EBA"/>
      <path d="M179.058 250.216V259.993H143.523C143.523 257.976 144.912 256.14 147.082 255.295L165.638 250.216H179.062H179.058Z" fill="black"/>
      <path d="M143.519 260C143.519 257.982 144.909 256.147 147.078 255.301L152.081 253.948C153.989 254.376 154.74 255.78 154.878 260H143.519Z" fill="white"/>
      <path d="M179.058 258.193V259.989H143.519C143.519 259.365 143.653 258.759 143.9 258.193H179.054H179.058Z" fill="#E48EBA"/>
      <path d="M192.463 246.972H196.004C196.874 246.972 197.582 247.679 197.582 248.55V249.823C197.582 250.694 196.874 251.401 196.004 251.401H192.463C191.592 251.401 190.885 250.694 190.885 249.823V248.55C190.885 247.679 191.592 246.972 192.463 246.972Z" fill="black"/>
      <path d="M165.635 246.972H169.176C170.046 246.972 170.754 247.679 170.754 248.55V249.823C170.754 250.694 170.046 251.401 169.176 251.401H165.635C164.764 251.401 164.057 250.694 164.057 249.823V248.55C164.057 247.679 164.764 246.972 165.635 246.972Z" fill="black"/>
      <path d="M185.682 71.9551L181.423 87.1088C181.093 88.277 178.793 88.277 178.467 87.1088L174.207 71.9551H185.682Z" fill="#BC5917"/>
      <path d="M172.528 133.514C172.528 133.514 172.782 136.706 167.285 139.384L172.528 133.514Z" fill="#322666"/>
      <path d="M192.314 73.1669V124.853H188.831V71.9443C188.831 71.9443 190.976 72.2454 192.314 73.1669Z" fill="#55B685"/>
      <path d="M168.406 73.1669V124.853H172.027V71.9443C172.027 71.9443 169.796 72.2454 168.406 73.1669Z" fill="#55B685"/>
      <path d="M193.192 124.97C193.192 126.417 192.02 127.589 190.573 127.589C189.125 127.589 187.953 126.417 187.953 124.97C187.953 123.522 189.125 122.351 190.573 122.351C192.02 122.351 193.192 123.522 193.192 124.97Z" fill="#FFD103"/>
      <path d="M172.945 124.97C172.945 126.417 171.773 127.589 170.326 127.589C168.878 127.589 167.706 126.417 167.706 124.97C167.706 123.522 168.878 122.351 170.326 122.351C171.773 122.351 172.945 123.522 172.945 124.97Z" fill="#FFD103"/>
      <path d="M153.042 32.6326C155.673 34.8166 156.035 38.7238 153.851 41.354C151.667 43.9842 147.76 44.347 145.13 42.163C142.5 39.9791 142.137 36.0718 144.321 33.4416C146.505 30.8114 150.412 30.4486 153.042 32.6326Z" fill="black"/>
      <path d="M148.127 31.9075C149.93 33.4058 152.607 33.1555 154.102 31.3524C155.6 29.5494 155.35 26.872 153.547 25.3773C151.744 23.879 149.066 24.1293 147.571 25.9324C146.073 27.7354 146.323 30.4128 148.127 31.9075Z" fill="black"/>
      <path d="M157.991 61.2204C171.955 72.8152 195.601 76.7659 207.196 62.8022C218.791 48.8384 218.566 24.6331 204.602 13.0384C190.635 1.44004 167.431 2.0205 155.836 15.9843C144.241 29.948 144.027 49.6221 157.991 61.2204Z" fill="black"/>
      <path d="M207.551 25.294C209.155 26.6254 211.531 26.4041 212.863 24.8006C214.194 23.197 213.973 20.8208 212.369 19.4893C210.766 18.1579 208.389 18.3792 207.058 19.9827C205.727 21.5863 205.948 23.9625 207.551 25.294Z" fill="black"/>
      <path d="M215.486 26.9807C217.92 29.0014 218.254 32.6148 216.233 35.0455C214.212 37.4798 210.599 37.8136 208.168 35.7928C205.734 33.7721 205.4 30.1587 207.421 27.728C209.441 25.2937 213.055 24.96 215.486 26.9807Z" fill="black"/>
      <path d="M211.197 33.8879C214.974 33.5396 218.315 36.315 218.667 40.0916C219.016 43.8682 216.24 47.2095 212.464 47.5614C208.687 47.9097 205.346 45.1344 204.994 41.3577C204.645 37.5811 207.421 34.2398 211.197 33.8879Z" fill="black"/>
      <path d="M213.055 45.2399C216.364 47.9899 216.821 52.8984 214.071 56.2107C211.321 59.5193 206.412 59.9764 203.1 57.2265C199.791 54.4765 199.334 49.568 202.084 46.2557C204.834 42.9471 209.743 42.49 213.055 45.2399Z" fill="black"/>
      <path d="M207.145 53.736C210.465 57.128 210.407 62.5699 207.014 65.8894C203.622 69.2089 198.181 69.1509 194.861 65.7588C191.542 62.3667 191.6 56.9249 194.992 53.6054C198.384 50.2858 203.826 50.3439 207.145 53.736Z" fill="black"/>
      <path d="M195.539 19.4025C198.518 21.8767 202.937 21.4667 205.411 18.4882C207.885 15.5097 207.475 11.091 204.497 8.61676C201.518 6.14253 197.099 6.55249 194.625 9.53098C192.151 12.5095 192.561 16.9283 195.539 19.4025Z" fill="black"/>
      <path d="M195.003 18.302C198.623 16.1612 199.822 11.4911 197.681 7.8712C195.54 4.25124 190.87 3.05218 187.25 5.19301C183.63 7.33385 182.431 12.0039 184.572 15.6238C186.713 19.2438 191.383 20.4428 195.003 18.302Z" fill="black"/>
      <path d="M203.125 22.2429C204.976 23.7775 207.718 23.5236 209.253 21.677C210.787 19.8267 210.534 17.0841 208.687 15.5495C206.837 14.0149 204.094 14.2688 202.559 16.1154C201.025 17.9656 201.279 20.7083 203.125 22.2429Z" fill="black"/>
      <path d="M157.559 63.3979C160.066 65.4804 163.785 65.1357 165.863 62.6288C167.946 60.122 167.601 56.4034 165.094 54.3246C162.587 52.2422 158.869 52.5868 156.79 55.0937C154.708 57.6006 155.052 61.3192 157.559 63.3979Z" fill="black"/>
      <path d="M151.283 59.0909C153.938 61.2966 157.875 60.9302 160.08 58.2746C162.286 55.619 161.92 51.6827 159.264 49.4769C156.609 47.2712 152.672 47.6376 150.467 50.2932C148.261 52.9488 148.627 56.8851 151.283 59.0909Z" fill="black"/>
      <path d="M148.09 51.2587C150.898 53.5914 155.067 53.2032 157.399 50.3952C159.732 47.5873 159.344 43.4188 156.536 41.0861C153.728 38.7533 149.56 39.1415 147.227 41.9495C144.894 44.7575 145.282 48.9259 148.09 51.2587Z" fill="black"/>
      <path d="M151.174 26.0516C153.452 27.9417 156.83 27.6297 158.72 25.3514C160.61 23.0731 160.298 19.6955 158.02 17.8054C155.741 15.9153 152.364 16.2273 150.474 18.5056C148.584 20.7839 148.896 24.1615 151.174 26.0516Z" fill="black"/>
      <path d="M157.936 22.9897C161.016 25.5474 165.588 25.1265 168.149 22.0428C170.707 18.9627 170.286 14.388 167.202 11.8303C164.122 9.27265 159.547 9.69349 156.989 12.7772C154.432 15.8573 154.853 20.4284 157.936 22.9897Z" fill="black"/>
      <path d="M163.32 6.97288C161.035 9.72645 161.412 13.8078 164.165 16.097C166.919 18.3826 171 18.0053 173.29 15.2517C175.575 12.4982 175.198 8.41316 172.444 6.12759C169.691 3.84201 165.609 4.21932 163.32 6.97288Z" fill="black"/>
      <path d="M169.705 3.85289C167.22 6.8459 167.63 11.2901 170.623 13.7752C173.616 16.2603 178.06 15.8503 180.545 12.8573C183.03 9.86431 182.621 5.42014 179.628 2.93504C176.635 0.449934 172.19 0.859885 169.705 3.85289Z" fill="black"/>
      <path d="M182.374 8.46761C184.409 10.1546 187.424 9.87524 189.114 7.84362C190.801 5.80837 190.522 2.79359 188.49 1.103C186.459 -0.583972 183.44 -0.304624 181.75 1.72699C180.063 3.76224 180.342 6.77702 182.374 8.46761Z" fill="black"/>
      <path d="M159.257 57.7739L157.334 57.5817C153.369 57.1862 150.448 53.6164 150.847 49.6511C151.243 45.6858 154.813 42.7654 158.778 43.1644L160.701 43.3567C164.666 43.7521 167.587 47.322 167.187 51.2873C166.792 55.2525 163.222 58.173 159.257 57.7739Z" fill="#724F47"/>
      <path d="M200.187 61.8735L198.264 61.6813C194.299 61.2858 191.378 57.716 191.777 53.7507C192.173 49.7854 195.743 46.865 199.708 47.264L201.631 47.4563C205.596 47.8517 208.516 51.4216 208.117 55.3869C207.722 59.3522 204.152 62.2726 200.187 61.8735Z" fill="#724F47"/>
      <path d="M177.6 72.496C165.413 71.2771 156.442 60.3063 157.664 48.1203L158.793 36.8593C160.011 24.6732 170.982 15.7014 183.168 16.924C195.354 18.143 204.326 29.1137 203.104 41.2998L201.975 52.5608C200.756 64.7469 189.786 73.7186 177.6 72.496Z" fill="#724F47"/>
      <path d="M158.916 54.0812C157.541 53.9434 156.536 52.7171 156.674 51.3385L158.796 30.1299L163.781 30.6305L161.659 51.8392C161.521 53.2141 160.294 54.2191 158.916 54.0812Z" fill="black"/>
      <path d="M199.352 58.13C197.977 57.9922 196.972 56.766 197.11 55.3874L199.233 34.1787L204.217 34.6794L202.095 55.888C201.957 57.263 200.731 58.2679 199.352 58.13Z" fill="black"/>
      <path d="M156.688 50.957L156.199 55.8547C157.254 66.6803 165.863 75.6847 177.073 76.8094C188.284 77.934 198.511 70.8125 201.689 60.4113L202.178 55.5137L156.688 50.957Z" fill="black"/>
      <path d="M204.736 29.4763C205.357 23.269 200.829 17.7364 194.625 17.1124L193.33 16.9818C191.774 13.4338 188.407 10.7999 184.275 10.3863C182.294 10.1868 180.386 10.5314 178.688 11.2824C176.907 9.29797 174.418 7.94113 171.555 7.65453C165.461 7.04505 160.022 11.4892 159.413 17.5877C159.286 18.872 159.391 20.12 159.681 21.3063L159.319 24.9269L158.807 30.0422L158.633 31.7945L158.818 31.8127C159.246 35.7344 162.384 38.9814 166.455 39.3913C169.615 39.7069 172.557 38.234 174.28 35.8033C175.488 38.5279 178.078 40.5522 181.238 40.8715C184.398 41.1871 187.34 39.7142 189.064 37.2835C190.272 40.0081 192.862 42.0324 196.022 42.3517C199.117 42.66 201.997 41.2524 203.731 38.9161L203.989 36.3366L204.054 36.3439L204.743 29.4727L204.736 29.4763Z" fill="black"/>
      <path d="M187.061 62.2908C182.515 59.8564 176.863 61.5615 174.429 66.1109L187.061 62.2908Z" fill="white"/>
      </g>
      <defs>
      <linearGradient id="paint0_linear_1838_8344" x1="180.971" y1="213.168" x2="180.971" y2="-5.672" gradientUnits="userSpaceOnUse">
      <stop stop-color="#FAFAFA"/>
      <stop offset="1" stop-color="#D5D5D5"/>
      </linearGradient>
      <clipPath id="clip0_1838_8344">
      <rect width="220" height="220.02" fill="white" transform="translate(70 20)"/>
      </clipPath>
      <clipPath id="clip1_1838_8344">
      <rect width="136.579" height="260" fill="white" transform="translate(112)"/>
      </clipPath>
      </defs>
    </svg>
  </div>`,
                confirmButtonColor: '#20b2aacc',
            });
        }
    } catch (error) {
        errorSearch.value = "Verifiez votre connexion internet et réessayez !";
        Swal.fire({
            title: errorSearch.value,
            html: `
  <div>
      <svg width="170" height="180" viewBox="0 0 170 180" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_1838_8144)">
<path d="M84.59 174.49C129.093 174.49 165.17 138.413 165.17 93.9101C165.17 49.407 129.093 13.3301 84.59 13.3301C40.0869 13.3301 4.01001 49.407 4.01001 93.9101C4.01001 138.413 40.0869 174.49 84.59 174.49Z" fill="#D6D6D6"/>
<path d="M32.2602 49.6698C41.6822 49.6698 49.3202 42.0318 49.3202 32.6098C49.3202 23.1878 41.6822 15.5498 32.2602 15.5498C22.8382 15.5498 15.2002 23.1878 15.2002 32.6098C15.2002 42.0318 22.8382 49.6698 32.2602 49.6698Z" fill="white"/>
<path d="M23.5297 41.3398C23.9097 41.7198 24.4197 41.9198 24.9497 41.8998C25.4797 41.9198 25.9997 41.7098 26.3697 41.3398L32.2597 35.4498L38.1997 41.3898C38.5697 41.7598 39.0797 41.9598 39.5997 41.9198C40.1197 41.9198 40.6197 41.7098 40.9897 41.3398C41.3697 40.9598 41.5697 40.4498 41.5497 39.9198C41.5697 39.3898 41.3597 38.8698 40.9897 38.4998L35.0997 32.6098L41.0397 26.6698C41.4097 26.2998 41.6097 25.7898 41.5697 25.2698C41.5697 24.7498 41.3597 24.2498 40.9897 23.8798C40.6097 23.4998 40.0997 23.2998 39.5697 23.3198C39.0397 23.2998 38.5197 23.5098 38.1497 23.8798L32.2597 29.7698L26.3197 23.8298C25.9497 23.4598 25.4497 23.2698 24.9297 23.2898C24.3997 23.2898 23.8997 23.4998 23.5297 23.8798C23.1497 24.2598 22.9497 24.7698 22.9697 25.2998C22.9497 25.8298 23.1597 26.3498 23.5297 26.7198L29.4197 32.6098L23.4797 38.5498C23.1097 38.9198 22.9197 39.4198 22.9497 39.9398C22.9497 40.4698 23.1597 40.9698 23.5297 41.3398ZM32.2597 52.9198C29.5397 52.9398 26.8397 52.3898 24.3397 51.3198C21.9297 50.2998 19.7397 48.8298 17.8897 46.9798C16.0397 45.1298 14.5697 42.9398 13.5497 40.5298C12.4797 38.0298 11.9297 35.3298 11.9497 32.6098C11.9297 29.8898 12.4797 27.1898 13.5497 24.6898C14.5697 22.2798 16.0397 20.0898 17.8897 18.2398C19.7397 16.3898 21.9297 14.9198 24.3397 13.8998C26.8397 12.8298 29.5397 12.2798 32.2597 12.2998C34.9797 12.2798 37.6797 12.8298 40.1797 13.8998C42.5897 14.9198 44.7797 16.3998 46.6297 18.2398C48.4797 20.0898 49.9497 22.2798 50.9697 24.6898C52.0397 27.1898 52.5897 29.8898 52.5697 32.6098C52.5897 35.3298 52.0397 38.0298 50.9697 40.5298C49.9497 42.9398 48.4797 45.1298 46.6297 46.9798C44.7797 48.8298 42.5897 50.2998 40.1797 51.3198C37.6797 52.3898 34.9797 52.9398 32.2597 52.9198Z" fill="#CD3C14"/>
<path d="M161.09 77.29L160.67 76.52C160.77 76.8 160.85 77.09 160.91 77.38L161.09 77.28V77.29Z" fill="#FF7900"/>
<path d="M148.87 73.0401C152.11 70.4601 156.83 70.9901 159.42 74.2201L144.39 46.6201L140.49 48.7501C139.41 50.8601 137.62 52.6201 135.27 53.6201L134.56 51.9701L131.18 53.8101L143.85 77.0801L148.87 73.0301V73.0401Z" fill="#FF7900"/>
<path d="M122.13 113.96C122.2 113.91 122.28 113.86 122.35 113.8L158.23 84.8098C159.75 83.5998 160.74 81.8498 161 79.9298C161.12 79.0698 161.07 78.2098 160.9 77.3798C160.84 77.0898 160.76 76.7998 160.66 76.5198C160.38 75.6998 159.98 74.9298 159.43 74.2498C159.43 74.2498 159.42 74.2398 159.41 74.2298C156.82 70.9998 152.1 70.4698 148.86 73.0498L143.84 77.0998L115.68 99.8498C119.41 103.47 121.81 108.43 122.12 113.97L122.13 113.96Z" fill="#FF7900"/>
<path d="M140.49 48.7501C141.87 46.0501 142.09 42.7801 140.8 39.7701C138.5 34.4201 132.3 31.9401 126.95 34.2401L134.56 51.9801L135.27 53.6301C137.62 52.6201 139.41 50.8601 140.49 48.7601V48.7501Z" fill="#C19372"/>
<path d="M73.5703 166.75V169.37L74.0603 170.81C74.3903 169.58 74.7303 168.36 75.0603 167.13C75.1703 167.03 75.2703 166.84 75.3803 166.84C81.4603 166.86 87.5503 166.54 93.6303 167L93.6903 167.03C92.8803 169.4 92.1103 171.79 91.3703 174.18C92.9403 174.05 94.4903 173.88 96.0303 173.66V166.74H73.5803L73.5703 166.75Z" fill="#4BB4E6"/>
<path d="M96.0195 166.75V173.67C102.27 172.78 108.28 171.17 113.98 168.94V166.75H96.0195Z" fill="#4BB4E6"/>
<path d="M73.0596 106.01L72.6597 161.45C72.6397 161.71 72.6396 161.96 72.6396 162.22H73.5696V162.2H76.7896C76.8896 161.49 77.1897 160.85 77.6497 160.35V95.4902C76.1997 96.1002 74.8397 96.8802 73.5797 97.7802C76.1097 98.4702 75.5696 103.22 73.0596 106.01Z" fill="#FF7900"/>
<path d="M82.3704 160.07C82.9904 160.6 83.4103 161.34 83.5203 162.19H103.14C103.25 161.37 103.65 160.64 104.24 160.11V94.1201C103.14 93.9401 102.01 93.8301 100.86 93.8301H100.11L94.6003 120.8C94.3803 121.86 93.3403 122.55 92.2803 122.33C91.5103 122.17 90.9104 121.57 90.7504 120.8L85.2504 93.8601C84.2704 93.8901 83.3104 93.9901 82.3604 94.1501V160.07H82.3704Z" fill="#FF7900"/>
<path d="M108.77 160.12C109.36 160.65 109.75 161.37 109.87 162.19H113.99V162.21H122.2V115.16C122.2 114.76 122.16 114.36 122.14 113.96C121.83 108.43 119.43 103.46 115.7 99.8401C113.72 97.9201 111.38 96.3901 108.78 95.3501V160.11L108.77 160.12Z" fill="#FF7900"/>
<path d="M109.87 162.19C109.89 162.34 109.92 162.49 109.92 162.64C109.92 164.52 108.39 166.05 106.51 166.05C104.63 166.05 103.1 164.52 103.1 162.64C103.1 162.48 103.13 162.34 103.15 162.19H83.53C83.55 162.34 83.58 162.49 83.58 162.64C83.58 164.52 82.05 166.05 80.17 166.05C78.29 166.05 76.76 164.52 76.76 162.64C76.76 162.48 76.79 162.34 76.81 162.19H73.59V166.75H114V162.19H109.88H109.87Z" fill="#4BB4E6"/>
<path d="M93.6296 167C87.5496 166.53 81.4696 166.86 75.3796 166.84C75.2696 166.84 75.1696 167.03 75.0596 167.13C74.7296 168.36 74.3896 169.58 74.0596 170.81L74.5496 172.26C74.7296 172.8 74.6796 173.36 74.4596 173.84C77.0796 174.17 79.7296 174.37 82.4196 174.44L83.0196 173.76C83.0196 173.76 83.0396 174.02 82.9596 174.45C83.4996 174.46 84.0396 174.49 84.5796 174.49C86.8696 174.49 89.1196 174.37 91.3596 174.18C92.0996 171.79 92.8696 169.4 93.6796 167.03L93.6196 167H93.6296Z" fill="#4BB4E6"/>
<path d="M104.24 160.11C104.84 159.57 105.63 159.23 106.5 159.23C107.37 159.23 108.16 159.57 108.77 160.11V95.2301C107.38 94.4101 105.84 93.8701 104.24 93.6401V160.11Z" fill="#50BE87"/>
<path d="M77.66 160.34C78.28 159.66 79.17 159.23 80.16 159.23C81.01 159.23 81.77 159.55 82.37 160.06V93.6401C80.71 93.8701 79.12 94.4101 77.66 95.2301V160.34Z" fill="#50BE87"/>
<path d="M103.1 162.65C103.1 164.53 104.63 166.06 106.51 166.06C108.39 166.06 109.92 164.53 109.92 162.65C109.92 162.49 109.89 162.35 109.87 162.2C109.76 161.38 109.36 160.65 108.77 160.13C108.17 159.59 107.38 159.25 106.5 159.25C105.62 159.25 104.84 159.59 104.24 160.13C103.65 160.66 103.25 161.38 103.14 162.21C103.12 162.36 103.09 162.51 103.09 162.66L103.1 162.65Z" fill="#FFD200"/>
<path d="M76.75 162.65C76.75 164.53 78.28 166.06 80.16 166.06C82.04 166.06 83.57 164.53 83.57 162.65C83.57 162.49 83.54 162.35 83.52 162.2C83.41 161.35 82.99 160.61 82.37 160.08C81.77 159.57 81.01 159.25 80.16 159.25C79.17 159.25 78.28 159.68 77.66 160.36C77.2 160.86 76.89 161.5 76.8 162.21C76.78 162.36 76.75 162.51 76.75 162.66V162.65Z" fill="#FFD200"/>
<path d="M92.28 122.33C93.34 122.55 94.38 121.86 94.6 120.8L100.11 93.8302L100.14 93.6602H85.21L85.25 93.8702L90.75 120.81C90.91 121.58 91.51 122.18 92.28 122.34V122.33Z" fill="#F16E00"/>
<path d="M83.02 173.76L82.42 174.44C82.6 174.44 82.78 174.45 82.97 174.45C83.05 174.02 83.03 173.76 83.03 173.76H83.02Z" fill="#4BB4E6"/>
<path d="M74.55 172.26L74.06 170.81L73.57 169.37L73.05 167.84C73.17 169.96 72.64 171.09 69.22 170.89L61.25 171.05C65.51 172.34 69.93 173.27 74.46 173.84C74.68 173.36 74.73 172.8 74.55 172.26Z" fill="#C19372"/>
<path d="M73.0497 167.84C72.9697 166.39 72.5997 164.47 72.6297 162.21C72.6297 161.96 72.6297 161.7 72.6497 161.44L73.0497 106C75.5597 103.21 76.0997 98.4602 73.5697 97.7702C72.9797 97.6102 72.2297 97.6702 71.2997 98.0202C65.6597 97.6802 58.3397 102.75 57.9997 108.39L57.1797 169.71C58.5097 170.19 59.8697 170.63 61.2297 171.05L69.1997 170.89C72.6197 171.1 73.1497 169.96 73.0297 167.84H73.0497Z" fill="#FF7900"/>
<path d="M59.5403 55.5999C63.4903 57.6499 65.0303 62.5199 62.9803 66.4699C60.9303 70.4199 56.0603 71.9599 52.1103 69.9099C48.1603 67.8599 46.6203 62.9899 48.6703 59.0399C50.7203 55.0899 55.5903 53.5499 59.5403 55.5999Z" fill="black"/>
<path d="M53.0907 56.0397C55.8007 57.4497 59.1307 56.3897 60.5407 53.6797C61.9507 50.9697 60.8907 47.6397 58.1807 46.2297C55.4707 44.8197 52.1407 45.8797 50.7307 48.5897C49.3207 51.2997 50.3807 54.6297 53.0907 56.0397Z" fill="black"/>
<path d="M73.7305 90.5899C94.6905 101.48 125.851 99.9599 136.741 78.9999C147.631 58.0399 140.641 27.3199 119.681 16.4299C98.7205 5.53992 69.3705 12.6999 58.4805 33.6599C47.5905 54.6199 52.7705 79.6999 73.7305 90.5899Z" fill="black"/>
<path d="M126.82 31.1897C129.23 32.4397 132.19 31.4997 133.44 29.0997C134.69 26.6897 133.75 23.7297 131.35 22.4797C128.94 21.2297 125.98 22.1697 124.73 24.5697C123.48 26.9797 124.42 29.9397 126.82 31.1897Z" fill="black"/>
<path d="M137.38 31.15C141.03 33.05 142.46 37.55 140.56 41.2C138.66 44.85 134.16 46.28 130.51 44.38C126.86 42.48 125.43 37.98 127.33 34.33C129.23 30.68 133.73 29.25 137.38 31.15Z" fill="black"/>
<path d="M133.84 41.1197C138.54 39.6297 143.56 42.2397 145.05 46.9397C146.54 51.6397 143.93 56.6597 139.23 58.1497C134.53 59.6397 129.51 57.0297 128.02 52.3297C126.53 47.6297 129.14 42.6097 133.84 41.1197Z" fill="black"/>
<path d="M134.66 74.1696C140.26 74.1696 144.8 69.6298 144.8 64.0296C144.8 58.4295 140.26 53.8896 134.66 53.8896C129.06 53.8896 124.52 58.4295 124.52 64.0296C124.52 69.6298 129.06 74.1696 134.66 74.1696Z" fill="black"/>
<path d="M134.17 67.4798C139.33 70.8698 140.76 77.8098 137.37 82.9698C133.98 88.1298 127.04 89.5598 121.88 86.1698C116.72 82.7798 115.29 75.8398 118.68 70.6798C122.07 65.5198 129.01 64.0898 134.17 67.4798Z" fill="black"/>
<path d="M109.92 27.02C114.39 29.34 119.9 27.6 122.22 23.13C124.54 18.66 122.8 13.15 118.33 10.83C113.86 8.50996 108.35 10.25 106.03 14.72C103.71 19.19 105.45 24.7 109.92 27.02Z" fill="black"/>
<path d="M102.19 28.4201C107.663 28.4201 112.1 23.9832 112.1 18.5101C112.1 13.037 107.663 8.6001 102.19 8.6001C96.7171 8.6001 92.2802 13.037 92.2802 18.5101C92.2802 23.9832 96.7171 28.4201 102.19 28.4201Z" fill="black"/>
<path d="M120.351 28.54C123.131 29.98 126.541 28.9 127.991 26.12C129.431 23.34 128.351 19.93 125.571 18.48C122.791 17.04 119.381 18.12 117.931 20.9C116.491 23.68 117.571 27.09 120.351 28.54Z" fill="black"/>
<path d="M73.7902 93.4701C77.5502 95.4201 82.1902 93.9601 84.1402 90.2001C86.0902 86.4401 84.6302 81.8101 80.8702 79.8501C77.1102 77.9001 72.4702 79.3601 70.5202 83.1201C68.5702 86.8801 70.0302 91.5101 73.7902 93.4701Z" fill="black"/>
<path d="M64.6207 89.7298C68.6007 91.7998 73.5107 90.2498 75.5807 86.2598C77.6507 82.2798 76.1007 77.3698 72.1107 75.2998C68.1307 73.2298 63.2207 74.7798 61.1507 78.7698C59.0807 82.7498 60.6307 87.6598 64.6207 89.7298Z" fill="black"/>
<path d="M58.3905 80.6499C62.6005 82.8399 67.8005 81.1999 69.9905 76.9899C72.1805 72.7799 70.5405 67.5799 66.3305 65.3899C62.1205 63.1999 56.9205 64.8399 54.7305 69.0499C52.5405 73.2599 54.1805 78.4599 58.3905 80.6499Z" fill="black"/>
<path d="M55.3402 47.7497C58.7602 49.5197 62.9602 48.1897 64.7402 44.7697C66.5102 41.3497 65.1802 37.1497 61.7602 35.3697C58.3402 33.5997 54.1402 34.9297 52.3602 38.3497C50.5902 41.7697 51.9202 45.9697 55.3402 47.7497Z" fill="black"/>
<path d="M63.0906 41.9798C67.7206 44.3798 73.4106 42.5798 75.8106 37.9498C78.2106 33.3298 76.4106 27.6298 71.7906 25.2298C67.1706 22.8298 61.4706 24.6298 59.0706 29.2498C56.6706 33.8798 58.4706 39.5698 63.1006 41.9698L63.0906 41.9798Z" fill="black"/>
<path d="M65.5102 20.1297C63.3702 24.2597 64.9802 29.3497 69.1102 31.4997C73.2402 33.6397 78.3303 32.0297 80.4803 27.8997C82.6203 23.7697 81.0102 18.6797 76.8802 16.5297C72.7502 14.3897 67.6602 15.9997 65.5102 20.1297Z" fill="black"/>
<path d="M72.7707 14.3898C70.4407 18.8798 72.1907 24.4198 76.6807 26.7498C81.1707 29.0798 86.7107 27.3298 89.0407 22.8398C91.3707 18.3498 89.6207 12.8098 85.1307 10.4798C80.6407 8.14982 75.1007 9.89982 72.7707 14.3898Z" fill="black"/>
<path d="M90.16 16.7599C93.21 18.3499 96.97 17.1599 98.56 14.0999C100.15 11.0499 98.96 7.28988 95.9 5.69988C92.85 4.10988 89.09 5.29988 87.5 8.34988C85.91 11.3999 87.1 15.1599 90.15 16.7499L90.16 16.7599Z" fill="black"/>
<path d="M74.3902 85.8498L71.8902 86.1398C66.7202 86.7198 62.0602 83.0098 61.4502 77.8498C60.8702 72.6798 64.5802 68.0198 69.7402 67.4098L72.2402 67.1198C77.4102 66.5398 82.0702 70.2498 82.6802 75.4098C83.2602 80.5798 79.5502 85.2398 74.3902 85.8498Z" fill="#714E46"/>
<path d="M127.57 79.7497L125.07 80.0397C119.9 80.6197 115.24 76.9097 114.63 71.7497C114.05 66.5797 117.76 61.9197 122.92 61.3097L125.42 61.0197C130.59 60.4397 135.25 64.1497 135.86 69.3097C136.44 74.4797 132.73 79.1397 127.57 79.7497Z" fill="#714E46"/>
<path d="M101.79 99.4999C85.8999 101.28 71.5699 89.8899 69.6999 74.0199L68.0199 59.3899C66.2399 43.4999 77.6299 29.1699 93.4999 27.2999C109.39 25.5199 123.72 36.9099 125.59 52.7799L127.27 67.4099C129.05 83.2999 117.66 97.6299 101.79 99.4999Z" fill="#714E46"/>
<path d="M72.9407 81.2501C71.1507 81.4601 69.5407 80.1701 69.3307 78.3801L66.1707 50.8201L72.6507 50.0801L75.8107 77.6401C76.0207 79.4301 74.7307 81.0401 72.9407 81.2501Z" fill="black"/>
<path d="M125.47 75.2198C123.68 75.4198 122.07 74.1398 121.86 72.3498L118.7 44.7898L125.18 44.0498L128.34 71.6098C128.55 73.3998 127.26 75.0098 125.47 75.2198Z" fill="black"/>
<path d="M69.2402 77.8899L69.9702 84.2499C74.4302 97.9999 87.9402 106.73 102.31 105.13C116.67 103.44 127.85 91.8799 129.08 77.4699L128.35 71.1099L69.2402 77.8899Z" fill="black"/>
<path d="M124.4 37.2898C123.47 29.2298 116.19 23.4398 108.12 24.3698L106.44 24.5598C103.39 20.3298 98.2902 18.0798 93.1002 18.6798C90.6202 18.9598 88.2602 19.8898 86.2502 21.3598C83.3402 19.2498 79.7502 18.3098 76.1802 18.7198C68.2602 19.6298 62.5702 26.7798 63.4802 34.6998C63.6702 36.3198 64.1302 37.8898 64.8502 39.3598L65.3902 44.0598L66.1502 50.7098L66.4102 52.9898L66.6502 52.9598C68.3302 57.9298 73.2402 61.0698 78.4602 60.4798C82.4402 60.0098 85.8602 57.4498 87.4202 53.7598C89.7702 56.9998 93.6902 58.7298 97.6702 58.2798C101.65 57.8098 105.07 55.2498 106.63 51.5598C108.98 54.7998 112.9 56.5298 116.88 56.0798C120.77 55.6198 124.13 53.1498 125.73 49.5798L125.34 46.2298H125.42L124.4 37.2898Z" fill="black"/>
<path d="M113 83.2514C106.887 78.3108 99.2836 81.7734 95.9998 90.9789C95.9998 90.9789 95.9998 90.9894 95.9998 91" fill="white"/>
</g>
<defs>
<clipPath id="clip0_1838_8144">
<rect width="161.17" height="169.49" fill="white" transform="translate(4 5)"/>
</clipPath>
</defs>
</svg>
    </div>`,
            confirmButtonColor: '#20b2aacc',
        });
    } finally {
        isLoading.value = false;
    }
}

// Nettoyage de la carte
onBeforeUnmount(() => {
    if (map) map.remove();
});
</script>

<template>
        <div ref="mapContainer" style="height: 260px; width: 100%;"></div>
</template>

<style scoped>
.btn-primary {
    color: var(--text-white);
}

.btn-text {
    /* body/16 semi bold */
    font-family: Roboto;
    font-size: 16px;
    font-style: normal;
    font-weight: 500;
    line-height: 20px;
    /* 125% */
    letter-spacing: 0.16px;
}

.form-group {
    width: 100%;
}

.form-group.full-width {
    grid-column: 1 / -1;
}

.did-floating-label-content {
    position: relative;
    margin-bottom: 10px;
}

.did-floating-label-content-error {
    position: relative;
}

.did-floating-label {
    color: var(--text-gray, #888);
    font-size: 14px;
    font-weight: normal;
    position: absolute;
    pointer-events: none;
    left: 15px;
    top: 15px;
    padding: 0 5px;
    background: #fff;
    transition: 0.2s ease all;
    -moz-transition: 0.2s ease all;
    -webkit-transition: 0.2s ease all;
}

.did-floating-input {
    font-size: 17px;
    display: block;
    width: 100%;
    height: 50px;
    padding: 19px 17px 8px;
    align-self: stretch;
    background: #FDFDFD;
    color: #323840;
    border: 1px solid #E7E7E7;
    border-radius: 15px;
    box-sizing: border-box;
}

/* Modification ici : ajout de la condition :not(:placeholder-shown) */
.did-floating-input:focus~.did-floating-label,
.did-floating-input:not(:placeholder-shown)~.did-floating-label {
    top: 1px;
    font-size: 12px;
}

.did-floating-input:focus {
    outline: none;
    border: 1px solid #E7E7E7;
}
</style>
